{% extends "default.html.twig" %}

{% block title %}Home{% endblock %}

{% block scripts %}
    <script type="module" src="/js/main.js"></script>
{% endblock %}

{% block notification %}
    {{ include('includes/notification.html.twig') }}
{% endblock %}

{% block content %}
    {% if not notes is defined or notes|length == 0 %}
        <div class="no-notes">You've not created any notes yet.</div>
    {% else %}
        <div id="notes">
            {% for note in notes %}
                <article class="note-item" id="note-{{ note.id|escape }}">
                    <div class="content">
                        <div class="metadata">
                            <p class="note-date">
                                {{ note.created|format_datetime(pattern: 'dd/MM/Y', timezone: 'Australia/Brisbane') }}
                            </p>
                            {% if note.category is defined and note.category != '' %}
                            <p class="pill purple">{{ note.category|escape }}</p>
                            {% endif %}
                        </div>
                        <h2>{{ note.title|escape }}</h2>
                        <div class="body">{{ note.body|e|markdown_to_html }}</div>
                    </div>
                    <div class="controls">
                        <a href="/manage/{{ note.id|escape }}"
                           class="button flex edit">
                            <img src="/images/white/edit.png"
                                 width="18"
                                 alt="Edit note {{ note.id|escape }}">
                            <span class="ml-1">edit</span>
                        </a>
                        <button type="button"
                                class="button flex delete"
                                id="delete-note-{{ note.id|escape }}">
                            <img src="/images/delete.png"
                                 width="18"
                                 alt="Edit note {{ note.id|escape }}">
                            <span class="ml-1">delete</span>
                        </button>
                    </div>
                </article>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}
